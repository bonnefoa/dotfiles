if [[ "$ZPROF" = true ]]; then
  zmodload zsh/zprof
fi

export ZPLUG_HOME=$HOME/git-repos/zplug
export GOROOT=/usr/lib/go/
export VISUAL=nvim
export EDITOR=nvim

source $ZPLUG_HOME/init.zsh

zplug "plugins/fzf", from:oh-my-zsh
zplug "plugins/git", from:oh-my-zsh
zplug "plugins/docker", from:oh-my-zsh
#
# Machine specific configuration files
zplug "$HOME/.zsh_conf/", from:local
zplug "$HOME/.zsh_conf/theme", from:local, as:theme
zplug "$HOME/.zsh_conf/kube", from:local, defer:3
zplug "$HOME/.zsh_conf/linux", from:local, if:"[[ $OSTYPE == *linux* ]]"
zplug "$HOME/.zsh_conf/mac", from:local, if:"[[ $OSTYPE == *darwin* ]]"

zplug "trystan2k/zsh-tab-title"
zplug "seebi/dircolors-solarized"
zplug "changyuheng/fz", defer:1
zplug "rupa/z", use:z.sh

# Kubectl autocompletion
zplug "plugins/kubectl", from:oh-my-zsh, defer:2
zplug "$HOME/git-repos/kubectl-fzf", from:local, defer:3

ulimit -n 4096

[ -z "$SSH_TTY" ] && keychain id_rsa -q
[ -z "$HOSTNAME" ] && HOSTNAME=`uname -n`
[ -f $HOME/.keychain/$HOSTNAME-sh ] && \
        . $HOME/.keychain/$HOSTNAME-sh
[ -f $HOME/.keychain/$HOSTNAME-sh-gpg ] && \
        . $HOME/.keychain/$HOSTNAME-sh-gpg

zplug load

if [[ "$ZPROF" = true ]]; then
  zprof
fi
